kernel.renderer.registrar_pagelet("info_historia",function(a){var c="#"+a.id;var b=a.mensajes;return{onload:function(){$(c).on("change","#anos",function(){d()});$(c).on("keyup","#actividad_reconocimiento",function(){var g=limpiarAcentos($(this).val());$("div.catedras, div.creditos").each(function(){var h=limpiarAcentos($(this).find("h3.titulo-corte").text());(h.indexOf(g)!=-1)?$(this).slideDown():$(this).slideUp()})});$(c).on("click","#orden_anio, #orden_materia",function(){$(c+" #filtro_modo").val($(this).data("valor"));d();return false});$(c).on("click","#pdf_btn",function(){var h=kernel.renderer.pagelet("menu_filtros").get_params_filtro();var g=a.url_pdf+"/?checks="+h+"&modo="+e()+"&param_modo="+f();$(this).attr("href",g)});$(c).on("click","#xls_btn",function(){var h=kernel.renderer.pagelet("menu_filtros").get_params_filtro();var g=a.url_xls+"/?checks="+h+"&modo="+e()+"&param_modo="+f();$(this).attr("href",g)});$(c).on("click","#flt_btn",function(){window.location.replace(a.url_flt)});$(c).on("click","#ver_filtros",function(){kernel.evts.disparar("mostrar_filtros")});function f(){if($(c+" #filtro_modo").val()=="a"){if($(c+" #anos").length>0){return $(c+" #anos").val()}}else{if($(c+" #materias-autocomplete").length>0){return $(c+" #materias-autocomplete").val()}}return""}function e(){if($(c+" #filtro_modo").val()!="a"){return"materia"}return"anio"}kernel.evts.escuchar("filtrar",d);function d(){var g=kernel.renderer.pagelet("menu_filtros").get_params_filtro();var h=kernel.renderer.pagelet("menu_filtros").get_estados_filtro();kernel.ajax.call(a.url_datos_historia_academica+"/?checks="+g+"&modo="+e()+"&param_modo="+f()+"&"+h,{type:"get",success:function(i){$(c).html(i.cont)}})}$(".catedra_nombre a").on("click",function(m){m.preventDefault();if($("#mat_"+this.id).css("display")=="none"){var k=$(this).data("origen");var h=$(this).attr("id");var j=$("#"+h);var l=j.data("cargado");var i="#mat_"+h;var g="#info_det_"+h;switch(k){case"Promocion":url=a.url_detalle_promocion;break;case"Examen":url=a.url_detalle_examen;break;case"AprobRes":url=a.url_detalle_examen;break;case"Regularidad":url=a.url_detalle_cursada;break;case"Equivalencia":url=a.url_detalle_equivalencia;break;case"EnCurso":url=a.url_detalle_encurso;break}if(l){$(i).show("2000");j.text(a.mensajes.cerrar)}else{kernel.ajax.call(url,{type:"post",data:{id:h},success:function(n){$(g).html(n.cont);$(i).show("2000");j.text(a.mensajes.cerrar);j.data("cargado",true)}})}}else{$("#mat_"+this.id).hide("2000");$("#"+this.id).text("Detalle")}return false});$(c).on("click","a.detalle-credito",function(k){k.preventDefault();var h=$(this);var g=h.data("nroTramite");var i=h.data("identificador");var j=h.data("cargado");if($("#cred_"+i).css("display")=="none"){if(j){$("#cred_"+i).show("2000");h.text(a.mensajes.cerrar)}else{kernel.ajax.call(a.url_detalle_creditos,{type:"post",data:{nro_tramite:g},success:function(l){$("#cred_"+i+" span.documentacion_presentada").html(l.cont);$("#cred_"+i).show("2000");h.text(a.mensajes.cerrar);h.data("cargado",true)}})}}else{$("#cred_"+i).hide("2000");h.text(a.mensajes.detalle)}});$(c).on("click",".js-consultas_habituales a",function(){kernel.evts.disparar("consulta_habitual",{consulta:$(this).attr("consulta")});return false})}}});